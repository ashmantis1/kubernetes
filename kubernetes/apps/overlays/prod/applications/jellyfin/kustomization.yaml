# yaml-language-server: $schema=https://kubernetes-schemas.devbu.io/kustomize.toolkit.fluxcd.io/kustomization_v1.json

resources:
  - ../../../../bases/jellyfin
patches: 
  - patch: |
      - op: replace
        path: /spec/rules/0/host
        value: jellyfin.k8s.ashman.world
    target:
      kind: Ingress
  - patch: |-
      - op: add
        path: /spec/tls/0/hosts/0
        value: jellyfin.k8s.ashman.world
    target:
      kind: Ingress
  - patch: |-
      - op: add 
        path: /metadata/annotations
        value:
          cert-manager.io/cluster-issuer: letsencrypt-prod
    target:
      kind: Ingress