- name: Boostrap node for k8s cluster 
  hosts: masters
  become: true
  tasks:

    - name: Join cluster using generated command masters
      ansible.builtin.shell: "{{ hostvars[groups['bootstrap'][0]]['control_plane_join_command'] }}"
      when: "'bootstrap' not in group_names"

    - name: Rune kube-vip configuration
      include_role:
        name: ../roles/kube_vip
      vars:
        interface: "{{api_loadbalancer_interface}}"
        vip: "{{api_loadbalancer_ip}}"
      when: "'bootstrap' not in group_names"